<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bate-Papo - Login</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Configura√ß√£o do Supabase (deve vir antes da biblioteca) -->
    <script>
        // Configura√ß√£o do Supabase
        const SUPABASE_URL = 'https://biotoafvuqgtlswlpjrt.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJpb3RvYWZ2dXFndGxzd2xwanJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg1OTExMjMsImV4cCI6MjA4NDE2NzEyM30.cUX-0lpYPNK4-KLpj5NUSeoA45ZouJBWFPtUbitLPTw';
        
        // Vari√°vel global para o cliente Supabase
        let supabaseClient = null;
        
        // Fun√ß√£o global para inicializar o Supabase
        window.initSupabaseClient = function() {
            try {
                // A biblioteca UMD pode expor de diferentes formas
                let SupabaseLib = null;
                
                // Tenta diferentes formas de acesso
                if (typeof supabaseLib !== 'undefined' && supabaseLib.createClient) {
                    SupabaseLib = supabaseLib;
                } else if (typeof window.supabaseLib !== 'undefined' && window.supabaseLib.createClient) {
                    SupabaseLib = window.supabaseLib;
                } else if (typeof window.supabase !== 'undefined' && window.supabase.createClient) {
                    // J√° est√° exposto como window.supabase
                    supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                    window.supabase = supabaseClient;
                    console.log('‚úÖ Supabase inicializado com sucesso (via window.supabase)');
                    return;
                }
                
                if (SupabaseLib && SupabaseLib.createClient) {
                    supabaseClient = SupabaseLib.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                    window.supabase = supabaseClient; // Exp√µe globalmente
                    console.log('‚úÖ Supabase inicializado com sucesso');
                } else {
                    console.error('‚ùå Biblioteca do Supabase n√£o encontrada. Verifique o console para mais detalhes.');
                    console.log('Vari√°veis globais dispon√≠veis:', Object.keys(window).filter(k => k.toLowerCase().includes('supabase')));
                }
            } catch (error) {
                console.error('‚ùå Erro ao inicializar Supabase:', error);
            }
        };
    </script>
    <!-- Supabase JS Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js" onload="initSupabaseClient()"></script>
</head>
<body>
    <div class="container">
        <div class="auth-container">
            <div class="auth-header">
                <h1>üí¨ Bate-Papo</h1>
                <p>Conecte-se e converse com pessoas de todo o Brasil</p>
            </div>

            <div class="auth-tabs">
                <button class="tab-btn active" data-tab="login">Entrar</button>
                <button class="tab-btn" data-tab="register">Cadastrar</button>
            </div>

            <!-- Formul√°rio de Login -->
            <form id="loginForm" class="auth-form active">
                <div class="form-group">
                    <label for="loginEmail">E-mail</label>
                    <input type="email" id="loginEmail" required placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Senha</label>
                    <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="submit" class="btn btn-primary">Entrar</button>
            </form>

            <!-- Formul√°rio de Cadastro -->
            <form id="registerForm" class="auth-form">
                <div class="form-group">
                    <label for="registerNickname">Apelido</label>
                    <input type="text" id="registerNickname" required placeholder="Seu apelido">
                </div>
                <div class="form-group">
                    <label for="registerEmail">E-mail</label>
                    <input type="email" id="registerEmail" required placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label for="registerPassword">Senha</label>
                    <input type="password" id="registerPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6">
                </div>
                <div class="form-group">
                    <label for="registerCity">Cidade</label>
                    <select id="registerCity" required>
                        <option value="">Selecione sua cidade</option>
                        <option value="S√£o Paulo">S√£o Paulo</option>
                        <option value="Guarulhos">Guarulhos</option>
                        <option value="Campinas">Campinas</option>
                        <option value="S√£o Bernardo do Campo">S√£o Bernardo do Campo</option>
                        <option value="Santo Andr√©">Santo Andr√©</option>
                        <option value="Osasco">Osasco</option>
                        <option value="Ribeir√£o Preto">Ribeir√£o Preto</option>
                        <option value="Sorocaba">Sorocaba</option>
                        <option value="Mau√°">Mau√°</option>
                        <option value="S√£o Jos√© dos Campos">S√£o Jos√© dos Campos</option>
                        <option value="Mogi das Cruzes">Mogi das Cruzes</option>
                        <option value="Santos">Santos</option>
                        <option value="Diadema">Diadema</option>
                        <option value="Jundia√≠">Jundia√≠</option>
                        <option value="Piracicaba">Piracicaba</option>
                        <option value="Carapicu√≠ba">Carapicu√≠ba</option>
                        <option value="Bauru">Bauru</option>
                        <option value="Itaquaquecetuba">Itaquaquecetuba</option>
                        <option value="S√£o Vicente">S√£o Vicente</option>
                        <option value="Franca">Franca</option>
                        <option value="Praia Grande">Praia Grande</option>
                        <option value="Guaruj√°">Guaruj√°</option>
                        <option value="Taubat√©">Taubat√©</option>
                        <option value="Limeira">Limeira</option>
                        <option value="Suzano">Suzano</option>
                        <option value="Barueri">Barueri</option>
                        <option value="Tabo√£o da Serra">Tabo√£o da Serra</option>
                        <option value="Sumar√©">Sumar√©</option>
                        <option value="Embu das Artes">Embu das Artes</option>
                        <option value="S√£o Caetano do Sul">S√£o Caetano do Sul</option>
                        <option value="Americana">Americana</option>
                        <option value="Araraquara">Araraquara</option>
                        <option value="Indaiatuba">Indaiatuba</option>
                        <option value="Cotia">Cotia</option>
                        <option value="S√£o Jos√© do Rio Preto">S√£o Jos√© do Rio Preto</option>
                        <option value="Jacare√≠">Jacare√≠</option>
                        <option value="Hortol√¢ndia">Hortol√¢ndia</option>
                        <option value="Rio Claro">Rio Claro</option>
                        <option value="Ara√ßatuba">Ara√ßatuba</option>
                        <option value="Santa B√°rbara d'Oeste">Santa B√°rbara d'Oeste</option>
                        <option value="Ferraz de Vasconcelos">Ferraz de Vasconcelos</option>
                        <option value="Francisco Morato">Francisco Morato</option>
                        <option value="Itapecerica da Serra">Itapecerica da Serra</option>
                        <option value="Itu">Itu</option>
                        <option value="Bragan√ßa Paulista">Bragan√ßa Paulista</option>
                        <option value="Pindamonhangaba">Pindamonhangaba</option>
                        <option value="Itapetininga">Itapetininga</option>
                        <option value="S√£o Carlos">S√£o Carlos</option>
                        <option value="Caieiras">Caieiras</option>
                        <option value="Mogi Gua√ßu">Mogi Gua√ßu</option>
                        <option value="Franco da Rocha">Franco da Rocha</option>
                        <option value="Mar√≠lia">Mar√≠lia</option>
                        <option value="Presidente Prudente">Presidente Prudente</option>
                        <option value="Botucatu">Botucatu</option>
                        <option value="Ja√∫">Ja√∫</option>
                        <option value="Atibaia">Atibaia</option>
                        <option value="Sert√£ozinho">Sert√£ozinho</option>
                        <option value="Barretos">Barretos</option>
                        <option value="Valinhos">Valinhos</option>
                        <option value="Votorantim">Votorantim</option>
                        <option value="Tatu√≠">Tatu√≠</option>
                        <option value="V√°rzea Paulista">V√°rzea Paulista</option>
                        <option value="Birigui">Birigui</option>
                        <option value="Salto">Salto</option>
                        <option value="Caraguatatuba">Caraguatatuba</option>
                        <option value="Catanduva">Catanduva</option>
                        <option value="Leme">Leme</option>
                        <option value="Assis">Assis</option>
                        <option value="Itatiba">Itatiba</option>
                        <option value="Ourinhos">Ourinhos</option>
                        <option value="Avar√©">Avar√©</option>
                        <option value="Mogi Mirim">Mogi Mirim</option>
                        <option value="Tup√£">Tup√£</option>
                        <option value="Jaboticabal">Jaboticabal</option>
                        <option value="Lins">Lins</option>
                        <option value="Votuporanga">Votuporanga</option>
                        <option value="Registro">Registro</option>
                        <option value="S√£o Roque">S√£o Roque</option>
                        <option value="Itapira">Itapira</option>
                        <option value="Pen√°polis">Pen√°polis</option>
                        <option value="Batatais">Batatais</option>
                        <option value="Aruj√°">Aruj√°</option>
                        <option value="Mairipor√£">Mairipor√£</option>
                        <option value="Cubat√£o">Cubat√£o</option>
                        <option value="Santo Ant√¥nio de Posse">Santo Ant√¥nio de Posse</option>
                        <option value="Po√°">Po√°</option>
                        <option value="S√£o Sebasti√£o">S√£o Sebasti√£o</option>
                        <option value="Vinhedo">Vinhedo</option>
                        <option value="Jaguari√∫na">Jaguari√∫na</option>
                        <option value="Paul√≠nia">Paul√≠nia</option>
                        <option value="Mongagu√°">Mongagu√°</option>
                        <option value="Itanha√©m">Itanha√©m</option>
                        <option value="Peru√≠be">Peru√≠be</option>
                        <option value="Ubatuba">Ubatuba</option>
                        <option value="Ilhabela">Ilhabela</option>
                        <option value="Campos do Jord√£o">Campos do Jord√£o</option>
                        <option value="Guararema">Guararema</option>
                        <option value="Sales√≥polis">Sales√≥polis</option>
                        <option value="Biritiba Mirim">Biritiba Mirim</option>
                        <option value="Santa Isabel">Santa Isabel</option>
                        <option value="Bertioga">Bertioga</option>
                        <option value="Outra">Outra</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Cadastrar</button>
            </form>

            <div id="errorMessage" class="error-message"></div>
        </div>
    </div>

    <script src="supabase-config.js"></script>
    <script src="supabase-service.js"></script>
    <script src="script.js"></script>
</body>
</html>
